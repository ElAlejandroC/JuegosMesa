<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Memory Numbers - Juego de Memoria Num√©rica</title>
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    :root {
      --primary: #00BFFF;
      --secondary: #87CEEB;
      --accent: #f093fb;
      --success: #10b981;
      --warning: #f59e0b;
      --error: #ef4444;
      --surface: rgba(255, 255, 255, 0.15);
      --surface-hover: rgba(255, 255, 255, 0.25);
      --text: #ffffff;
      --text-muted: rgba(255, 255, 255, 0.8);
      --card: #ffffff;
      --card-shadow: rgba(0, 0, 0, 0.2);
      --revealed: #34d399;
      --correct: #10b981;
      --wrong: #ef4444;
      --board-shadow: rgba(0, 0, 0, 0.3);
    }

    body {
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      background: linear-gradient(135deg, var(--primary), var(--secondary));
      min-height: 100vh;
      display: flex;
      justify-content: center;
      align-items: center;
      padding: 1rem;
      position: relative;
      overflow-x: hidden;
    }

    body::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: 
        radial-gradient(circle at 20% 80%, rgba(120, 119, 198, 0.3) 0%, transparent 50%),
        radial-gradient(circle at 80% 20%, rgba(255, 135, 135, 0.3) 0%, transparent 50%),
        radial-gradient(circle at 40% 40%, rgba(120, 219, 226, 0.2) 0%, transparent 50%);
      pointer-events: none;
    }

    .game-container {
      max-width: 800px;
      width: 100%;
      background: var(--surface);
      backdrop-filter: blur(20px);
      border-radius: 24px;
      padding: 2rem;
      box-shadow: 
        0 25px 50px -12px var(--board-shadow),
        0 0 0 1px rgba(255, 255, 255, 0.1);
      border: 1px solid rgba(255, 255, 255, 0.2);
      text-align: center;
      position: relative;
      z-index: 1;
    }

    .game-header {
      margin-bottom: 2rem;
    }

    .game-title {
      font-size: 2.5rem;
      font-weight: 700;
      color: var(--text);
      margin-bottom: 0.5rem;
      text-shadow: 0 2px 4px rgba(0, 0, 0, 0.3);
      letter-spacing: -0.025em;
    }

    .game-subtitle {
      color: var(--text-muted);
      font-size: 1.1rem;
      font-weight: 400;
    }

    .controls {
      display: flex;
      justify-content: center;
      align-items: center;
      gap: 1rem;
      margin-bottom: 2rem;
      flex-wrap: wrap;
    }

    .btn {
      background: var(--surface);
      border: 1px solid rgba(255, 255, 255, 0.2);
      border-radius: 12px;
      color: var(--text);
      padding: 0.75rem 1.5rem;
      font-size: 0.95rem;
      font-weight: 500;
      cursor: pointer;
      transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
      backdrop-filter: blur(10px);
      position: relative;
      overflow: hidden;
    }

    .btn::before {
      content: '';
      position: absolute;
      top: 0;
      left: -100%;
      width: 100%;
      height: 100%;
      background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);
      transition: left 0.5s;
    }

    .btn:hover::before {
      left: 100%;
    }

    .btn:hover {
      background: var(--surface-hover);
      transform: translateY(-2px);
      box-shadow: 0 8px 25px rgba(0, 0, 0, 0.15);
    }

    .btn:active {
      transform: translateY(0);
    }

    .difficulty-selector {
      display: flex;
      gap: 0.5rem;
      background: var(--surface);
      border-radius: 12px;
      padding: 0.25rem;
      border: 1px solid rgba(255, 255, 255, 0.2);
    }

    .difficulty-btn {
      background: transparent;
      border: none;
      color: var(--text-muted);
      padding: 0.5rem 1rem;
      border-radius: 8px;
      cursor: pointer;
      transition: all 0.3s ease;
      font-size: 0.9rem;
      font-weight: 500;
    }

    .difficulty-btn.active {
      background: var(--accent);
      color: white;
      transform: scale(1.05);
    }

    .stats-container {
      display: flex;
      justify-content: center;
      gap: 1.5rem;
      margin-bottom: 2rem;
      flex-wrap: wrap;
    }

    .stat-item {
      background: var(--surface);
      border-radius: 12px;
      padding: 0.75rem 1.5rem;
      border: 1px solid rgba(255, 255, 255, 0.1);
      min-width: 120px;
    }

    .stat-label {
      font-size: 0.8rem;
      color: var(--text-muted);
      margin-bottom: 0.25rem;
      text-transform: uppercase;
      letter-spacing: 0.05em;
    }

    .stat-value {
      font-size: 1.2rem;
      font-weight: 600;
      color: var(--text);
    }

    .status {
      font-size: 1rem;
      font-weight: 500;
      padding: 0.75rem 1.5rem;
      border-radius: 12px;
      margin-bottom: 1.5rem;
      transition: all 0.3s ease;
      border: 1px solid rgba(255, 255, 255, 0.1);
      background: var(--surface);
      color: var(--text);
    }

    .status.win {
      background: var(--success);
      color: white;
      box-shadow: 0 4px 20px rgba(16, 185, 129, 0.3);
      animation: celebrateWin 0.6s ease-out;
    }

    .status.error {
      background: var(--error);
      color: white;
      box-shadow: 0 4px 20px rgba(239, 68, 68, 0.3);
    }

    @keyframes celebrateWin {
      0% { transform: scale(1); }
      50% { transform: scale(1.05); }
      100% { transform: scale(1); }
    }

    .game-board {
      background: rgba(255, 255, 255, 0.05);
      border-radius: 20px;
      border: 1px solid rgba(255, 255, 255, 0.1);
      backdrop-filter: blur(10px);
      padding: 2rem;
      display: grid;
      gap: 1rem;
      justify-content: center;
    }

    /* Configuraciones correctas de cuadr√≠cula */
    .game-board.easy {
      grid-template-columns: repeat(3, 1fr);
      grid-template-rows: repeat(3, 1fr);
    }

    .game-board.medium {
      grid-template-columns: repeat(4, 1fr);
      grid-template-rows: repeat(4, 1fr);
    }

    .game-board.hard {
      grid-template-columns: repeat(5, 1fr);
      grid-template-rows: repeat(5, 1fr);
    }

    .card {
      aspect-ratio: 1;
      background: var(--card);
      border-radius: 12px;
      display: flex;
      justify-content: center;
      align-items: center;
      cursor: pointer;
      font-size: 1.5rem;
      font-weight: 700;
      color: #2d3748;
      transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
      box-shadow: 
        0 4px 15px var(--card-shadow),
        inset 0 2px 4px rgba(255, 255, 255, 0.3);
      position: relative;
      overflow: hidden;
      min-height: 60px;
    }

    .card::before {
      content: '';
      position: absolute;
      top: 50%;
      left: 50%;
      width: 0;
      height: 0;
      background: radial-gradient(circle, rgba(255, 255, 255, 0.3) 0%, transparent 70%);
      border-radius: 50%;
      transform: translate(-50%, -50%);
      transition: all 0.3s ease;
    }

    .card:hover::before {
      width: 120%;
      height: 120%;
    }

    .card:hover {
      transform: translateY(-4px) scale(1.05);
      box-shadow: 0 8px 25px rgba(0, 0, 0, 0.2);
    }

    /* Arreglo del problema del "?" */
    .card.hidden {
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      color: white;
    }

    .card.hidden::after {
      content: '?';
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      color: white;
      font-size: 2rem;
      font-weight: bold;
      z-index: 1;
    }

    .card.revealed {
      background: var(--revealed);
      color: white;
      transform: scale(1.1);
      animation: reveal 0.3s ease-out;
    }

    /* Removemos el ::after cuando la carta no est√° oculta */
    .card.correct::after,
    .card.wrong::after,
    .card.revealed::after {
      display: none;
    }

    .card.correct {
      background: var(--correct);
      color: white;
      animation: correct 0.5s ease-out;
    }

    .card.wrong {
      background: var(--wrong);
      color: white;
      animation: wrong 0.5s ease-out;
    }

    @keyframes reveal {
      0% { transform: rotateY(90deg); }
      100% { transform: rotateY(0deg) scale(1.1); }
    }

    @keyframes correct {
      0% { transform: scale(1.1); }
      50% { transform: scale(1.2); }
      100% { transform: scale(1.1); }
    }

    @keyframes wrong {
      0% { transform: translateX(0); }
      25% { transform: translateX(-5px); }
      75% { transform: translateX(5px); }
      100% { transform: translateX(0); }
    }

    /* Responsive Design */
    @media (max-width: 768px) {
      .game-container {
        padding: 1.5rem;
      }

      .game-title {
        font-size: 2rem;
      }

      .game-board {
        padding: 1.5rem;
        gap: 0.75rem;
      }

      .card {
        font-size: 1.2rem;
        min-height: 50px;
      }

      .controls {
        gap: 0.5rem;
      }

      .stats-container {
        gap: 1rem;
      }
    }

    @media (max-width: 480px) {
      .game-title {
        font-size: 1.75rem;
      }

      .game-board {
        gap: 0.5rem;
        padding: 1rem;
      }

      .card {
        font-size: 1rem;
        min-height: 45px;
      }

      /* Mantenemos las cuadr√≠culas correctas en m√≥vil tambi√©n */
      .game-board.easy {
        grid-template-columns: repeat(3, 1fr);
        grid-template-rows: repeat(3, 1fr);
      }

      .game-board.medium {
        grid-template-columns: repeat(4, 1fr);
        grid-template-rows: repeat(4, 1fr);
      }

      .game-board.hard {
        grid-template-columns: repeat(5, 1fr);
        grid-template-rows: repeat(5, 1fr);
      }
    }

    @media (prefers-reduced-motion: reduce) {
      * {
        animation-duration: 0.01ms !important;
        animation-iteration-count: 1 !important;
        transition-duration: 0.01ms !important;
      }
    }

    .card:focus {
      outline: 2px solid var(--accent);
      outline-offset: 2px;
    }
    .card.flash {
    animation: flashAnimation 0.8s ease-in-out;
    }

    @keyframes flashAnimation {
        0% { transform: rotateY(0deg); background-color: #4caf50; }
        50% { transform: rotateY(180deg); background-color: #fff176; }
        100% { transform: rotateY(0deg); background-color: #4caf50; }
    }

  </style>
</head>
<body>
  <div class="game-container">
    <div class="game-header">
      <h1 class="game-title">üß† Memory Numbers</h1>
      <p class="game-subtitle">Encuentra los n√∫meros en orden secuencial</p>
    </div>
    
    <div class="controls">
      <button class="btn" onclick="game.startNewGame()">üéÆ Nuevo Juego</button>
      
      <div class="difficulty-selector">
        <button class="difficulty-btn active" data-difficulty="easy">F√°cil (0-8)</button>
        <button class="difficulty-btn" data-difficulty="medium">Medio (0-15)</button>
        <button class="difficulty-btn" data-difficulty="hard">Dif√≠cil (0-24)</button>
      </div>
    </div>

    <div class="stats-container">
      <div class="stat-item">
        <div class="stat-label">Siguiente</div>
        <div class="stat-value" id="nextNumber">0</div>
      </div>
      <div class="stat-item">
        <div class="stat-label">Encontrados</div>
        <div class="stat-value" id="foundCount">0</div>
      </div>
      <div class="stat-item">
        <div class="stat-label">Tiempo</div>
        <div class="stat-value" id="timer">00:00</div>
      </div>
      <div class="stat-item">
        <div class="stat-label">Intentos</div>
        <div class="stat-value" id="attempts">0</div>
      </div>
    </div>

    <div id="status" class="status">¬°Haz clic en "Nuevo Juego" para empezar!</div>

    <div id="gameBoard" class="game-board easy"></div>
  </div>

<script>
  class MemoryNumbersGame {
    constructor() {
      this.difficulty = 'easy';
      this.maxNumber = 8;
      this.boardSize = { cols: 3, rows: 3 };
      this.currentNumber = 0;
      this.attempts = 0;
      this.gameStarted = false;
      this.startTime = null;
      this.timerInterval = null;
      this.numbers = [];
      this.difficultySettings = {
        easy: { max: 8, cols: 3, rows: 3 },
        medium: { max: 15, cols: 4, rows: 4 },
        hard: { max: 24, cols: 5, rows: 5 }
      };
      this.init();
    }

    init() {
      this.bindEvents();
      this.setupBoard();
    }

    bindEvents() {
      document.querySelectorAll('.difficulty-btn').forEach(btn => {
        btn.addEventListener('click', (e) => this.changeDifficulty(e.target.dataset.difficulty));
      });
      document.addEventListener('keydown', (e) => {
        if (e.key === 'r' && e.ctrlKey) {
          e.preventDefault();
          this.startNewGame();
        }
      });
    }

    changeDifficulty(newDifficulty) {
      document.querySelectorAll('.difficulty-btn').forEach(btn => btn.classList.remove('active'));
      document.querySelector(`[data-difficulty="${newDifficulty}"]`).classList.add('active');
      
      this.difficulty = newDifficulty;
      const settings = this.difficultySettings[newDifficulty];
      this.maxNumber = settings.max;
      this.boardSize = { cols: settings.cols, rows: settings.rows };
      
      this.setupBoard();
      this.updateStatus(`Dificultad cambiada a ${newDifficulty}. ¬°Haz clic en "Nuevo Juego" para empezar!`);
    }

    setupBoard() {
      const board = document.getElementById('gameBoard');
      board.className = `game-board ${this.difficulty}`;
      board.innerHTML = '';

      // Creamos solo los n√∫meros necesarios para llenar el tablero
      const totalCells = this.boardSize.cols * this.boardSize.rows;
      this.numbers = [];
      
      // Primero agregamos los n√∫meros del 0 al maxNumber
      for (let i = 0; i <= this.maxNumber; i++) {
        this.numbers.push(i);
      }
      
      // Si necesitamos m√°s celdas, agregamos n√∫meros aleatorios adicionales
      while (this.numbers.length < totalCells) {
        const randomNum = Math.floor(Math.random() * (this.maxNumber + 1));
        this.numbers.push(randomNum);
      }

      // Mezclar n√∫meros (Fisher-Yates)
      for (let i = this.numbers.length - 1; i > 0; i--) {
        const j = Math.floor(Math.random() * (i + 1));
        [this.numbers[i], this.numbers[j]] = [this.numbers[j], this.numbers[i]];
      }

      this.numbers.forEach((number, index) => {
        const card = document.createElement('div');
        card.className = 'card hidden';
        card.dataset.number = number;
        card.dataset.index = index;
        card.textContent = ""; // Inicialmente vac√≠o
        card.setAttribute('tabindex', '0');
        
        card.addEventListener('click', () => this.handleCardClick(card));
        card.addEventListener('keydown', (e) => {
          if (e.key === 'Enter' || e.key === ' ') {
            e.preventDefault();
            this.handleCardClick(card);
          }
        });

        board.appendChild(card);
      });
    }

    startNewGame() {
      this.currentNumber = 0;
      this.attempts = 0;
      this.gameStarted = true;
      this.startTime = Date.now();
      this.setupBoard();
      this.startTimer();
      this.updateStats();
      this.updateStatus(`¬°Juego iniciado! Encuentra el n√∫mero ${this.currentNumber}`);
    }

    startTimer() {
      if (this.timerInterval) {
        clearInterval(this.timerInterval);
      }
      
      this.timerInterval = setInterval(() => {
        if (this.gameStarted && this.startTime) {
          const elapsed = Math.floor((Date.now() - this.startTime) / 1000);
          const minutes = Math.floor(elapsed / 60).toString().padStart(2, '0');
          const seconds = (elapsed % 60).toString().padStart(2, '0');
          document.getElementById('timer').textContent = `${minutes}:${seconds}`;
        }
      }, 1000);
    }

    handleCardClick(card) {
      if (!this.gameStarted || card.classList.contains('correct')) return;

      const number = parseInt(card.dataset.number);
      this.attempts++;

      // Mostrar el n√∫mero en la carta
      card.textContent = number;

      if (number === this.currentNumber) {
        card.classList.remove('hidden');
        card.classList.add('correct');
        this.currentNumber++;

        if (this.currentNumber > this.maxNumber) {
          this.updateStatus("üéâ ¬°Ganaste! Has encontrado todos los n√∫meros.", "win");
          this.gameStarted = false;
          clearInterval(this.timerInterval);
        } else {
          this.updateStatus(`¬°Correcto! Ahora busca el n√∫mero ${this.currentNumber}`);
        }
      } else {
        card.classList.remove('hidden');
        card.classList.add('wrong');
        this.updateStatus(`‚ùå N√∫mero incorrecto. Intenta de nuevo.`, "error");

        // Solo ocultar la carta despu√©s de un momento, sin reiniciar el juego
        setTimeout(() => {
          card.classList.remove('wrong');
          card.classList.add('hidden');
          card.textContent = "";
          this.updateStatus(`Busca el n√∫mero ${this.currentNumber}`);
        }, 1500);
      }
      this.updateStats();
    }
    handleWrongNumber(card) {
        card.classList.add('wrong');
        this.updateStatus(`N√∫mero incorrecto`, "error");

        if (this.attempts > 2) {
          // Volteamos (resaltamos) las correctas temporalmente
          const correctCards = document.querySelectorAll('.card.correct');
          correctCards.forEach(c => c.classList.add('flash')); // Clase temporal
          setTimeout(() => {
            correctCards.forEach(c => c.classList.remove('flash'));
          }, 800);
        }
    }

    updateStats() {
      document.getElementById('nextNumber').textContent = this.currentNumber;
      document.getElementById('foundCount').textContent = `${this.currentNumber}/${this.maxNumber + 1}`;
      document.getElementById('attempts').textContent = this.attempts;
    }

    updateStatus(message, type = '') {
      const statusEl = document.getElementById('status');
      statusEl.textContent = message;
      statusEl.className = `status ${type}`;
      statusEl.setAttribute('aria-live', 'polite');
    }

    updateStatus(message, type = '') {
      const statusEl = document.getElementById('status');
      statusEl.textContent = message;
      statusEl.className = `status ${type}`;
      statusEl.setAttribute('aria-live', 'polite');
    }
  }

  let game;
  document.addEventListener('DOMContentLoaded', () => {
    game = new MemoryNumbersGame();
  });
</script>

</body>
</html>